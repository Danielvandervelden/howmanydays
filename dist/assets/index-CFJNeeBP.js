(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const _={FROM_DATE:"fromDate",TO_DATE:"toDate",MODE:"mode",QUICK_SELECT:"quickSelect",EDIT:"edit"},me={QUICK_SELECTS:"quickSelects"},ge=[{id:"christmas",label:"Christmas",date:"12-25",type:"relative"},{id:"halloween",label:"Halloween",date:"10-31",type:"relative"},{id:"thanksgiving",label:"Thanksgiving",date:"11-28",type:"relative"},{id:"new-year",label:"New Year",date:"01-01",type:"relative"},{id:"easter",label:"Easter",date:"04-04",type:"relative"},{id:"valentines",label:"Valentine's Day",date:"02-14",type:"relative"},{id:"spring",label:"Spring",date:"03-20",type:"relative"},{id:"summer",label:"Summer",date:"06-21",type:"relative"},{id:"autumn",label:"Fall",date:"09-23",type:"relative"},{id:"winter",label:"Winter",date:"12-21",type:"relative"}],ae="btn-primary",se="btn-secondary";function ee({quickSelect:e,isActive:t}){const n=document.createElement("button");return n.setAttribute("data-id",e.id),n.classList.add("quick-select-button"),n.classList.add(t?ae:se),n.disabled=t,n.setAttribute("data-date",e.date),n.textContent=e.label,n}const j=new Map,D={emit:(e,t)=>{const n=new CustomEvent(e,{detail:t});console.log(`[Events] Emitting ${e}`,t),document.dispatchEvent(n)},on:(e,t)=>{console.log(`[Events] Registering listener for ${e}`),j.has(e)||(j.set(e,new Set),document.addEventListener(e,o=>{const r=o;console.log(`[Events] Received ${e}`,r.detail);const a=j.get(e);a&&a.forEach(l=>{console.log(`[Events] Calling callback for ${e}`),l(r.detail)})}));const n=j.get(e);n&&n.add(t)},off:(e,t)=>{const n=j.get(e);n&&n.delete(t)}};function x(){const e=new URLSearchParams(window.location.search),t=e.get(_.FROM_DATE),n=e.get(_.TO_DATE),o=e.get(_.MODE),r=e.get(_.QUICK_SELECT),a=e.get(_.EDIT);return{fromDate:t,toDate:n,mode:o,quickSelect:r,edit:a}}var p=(e=>(e.QUICK_SELECT_CLICKED="quick-select-clicked",e.MODE_CHANGED="mode-changed",e.ENABLE_MODE_CONTROLS="enable-mode-controls",e.FROM_DATE_CHANGED="from-date-changed",e.TO_DATE_CHANGED="to-date-changed",e.QUICK_SELECT_DELETED="quick-select-deleted",e.QUICK_SELECT_ADDED="quick-select-added",e.QUICK_SELECT_UPDATED="quick-select-updated",e.QUICK_SELECT_REORDERED="quick-select-reordered",e.QUICK_SELECT_REMOVED_FROM_URL="quick-select-removed-from-url",e))(p||{});const $={get:{quickSelects:()=>{const e=localStorage.getItem(me.QUICK_SELECTS);return e?JSON.parse(e):[]}},set:{quickSelects:e=>{localStorage.setItem(me.QUICK_SELECTS,JSON.stringify(e))}},remove:{quickSelect:e=>{const t=$.get.quickSelects().filter(n=>n.id!==e);$.set.quickSelects(t)}}},L={set:{fromDate:e=>{const t=new URLSearchParams(window.location.search);t.set(_.FROM_DATE,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},toDate:e=>{const t=new URLSearchParams(window.location.search);t.set(_.TO_DATE,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},mode:e=>{const t=new URLSearchParams(window.location.search);t.set(_.MODE,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},quickSelect:e=>{const t=new URLSearchParams(window.location.search);t.set(_.QUICK_SELECT,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},edit:e=>{const t=new URLSearchParams(window.location.search);t.set(_.EDIT,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)}},remove:{fromDate:()=>{const e=new URLSearchParams(window.location.search);e.delete(_.FROM_DATE);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},toDate:()=>{const e=new URLSearchParams(window.location.search);e.delete(_.TO_DATE);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},mode:()=>{const e=new URLSearchParams(window.location.search);e.delete(_.MODE);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},quickSelect:()=>{const e=new URLSearchParams(window.location.search);e.delete(_.QUICK_SELECT);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},edit:()=>{const e=new URLSearchParams(window.location.search);e.delete(_.EDIT);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)}}};function $e(){he(),D.on(p.QUICK_SELECT_DELETED,({id:e})=>{const t=document.querySelector(`.quick-select-button[data-id="${e}"]`);t&&t.remove()}),D.on(p.QUICK_SELECT_REMOVED_FROM_URL,()=>{he(!0)}),D.on(p.QUICK_SELECT_ADDED,({quickSelect:e})=>{const t=document.getElementById("quick-select-content");if(!(t instanceof HTMLDivElement)){console.error("Quick select container not found");return}const n=ee({quickSelect:e,isActive:!1});n.addEventListener("click",()=>{te(e.id)}),t.appendChild(n)}),D.on(p.QUICK_SELECT_UPDATED,({oldId:e,quickSelect:t})=>{const n=document.querySelector(`.quick-select-button[data-id="${e}"]`);if(n)if(e!==t.id){if(!(document.getElementById("quick-select-content")instanceof HTMLDivElement)){console.error("Quick select container not found");return}const r=ee({quickSelect:t,isActive:!1});r.addEventListener("click",()=>{te(t.id)}),n.replaceWith(r)}else{const o=n.querySelector("span");o&&(o.textContent=t.label)}}),D.on(p.QUICK_SELECT_REORDERED,()=>{const{quickSelect:e}=x(),t=document.getElementById("quick-select-content");if(!(t instanceof HTMLDivElement)){console.error("Quick select container not found");return}t.innerHTML="",$.get.quickSelects().forEach(o=>{const r=ee({quickSelect:o,isActive:o.id===e});r.addEventListener("click",()=>{te(o.id)}),t.appendChild(r)})})}function he(e=!1){const{quickSelect:t}=x();let n=$.get.quickSelects();n.length===0&&($.set.quickSelects(ge),n=ge);const o=document.getElementById("quick-select-content");if(!(o instanceof HTMLDivElement)){console.error("Quick select container not found");return}o.innerHTML="",n.forEach(r=>{const a=ee({quickSelect:r,isActive:e?!1:r.id===t});a.addEventListener("click",()=>{te(r.id)}),o.appendChild(a)})}function te(e){L.set.quickSelect(e);const t=$.get.quickSelects().find(o=>o.id===e);if(!t){console.error("Quick select in localstorage not found to handle quick select button click");return}D.emit(p.QUICK_SELECT_CLICKED,{quickSelect:t});const n=document.querySelectorAll(".quick-select-button");for(const o of n)o instanceof HTMLButtonElement&&(o.getAttribute("data-id")===e?(o.classList.remove(se),o.classList.add(ae),o.disabled=!0):(o.classList.remove(ae),o.classList.add(se),o.disabled=!1))}function Ie(){const e=document.getElementById("current-time"),t=document.getElementById("current-date");if(!e||!t){console.error("Current time or date div not found");return}pe(e,t),setInterval(()=>{pe(e,t)},1e3)}function pe(e,t){const n=navigator.language,o=new Date,r=o.toLocaleTimeString(),a=o.toLocaleDateString(n,{day:"numeric",month:"long",year:"numeric"});e.textContent=r,t.textContent=a}function Me(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ne={exports:{}},_e=ne.exports,Ee;function qe(){return Ee||(Ee=1,(function(e,t){(function(n,o){e.exports=o()})(_e,(function(){var n=1e3,o=6e4,r=36e5,a="millisecond",l="second",d="minute",y="hour",b="day",h="week",E="month",v="quarter",O="year",I="date",J="Invalid Date",oe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Te=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ce={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var c=["th","st","nd","rd"],i=f%100;return"["+f+(c[(i-20)%10]||c[i]||c[0])+"]"}},re=function(f,c,i){var u=String(f);return!u||u.length>=c?f:""+Array(c+1-u.length).join(i)+f},we={s:re,z:function(f){var c=-f.utcOffset(),i=Math.abs(c),u=Math.floor(i/60),s=i%60;return(c<=0?"+":"-")+re(u,2,"0")+":"+re(s,2,"0")},m:function f(c,i){if(c.date()<i.date())return-f(i,c);var u=12*(i.year()-c.year())+(i.month()-c.month()),s=c.clone().add(u,E),m=i-s<0,g=c.clone().add(u+(m?-1:1),E);return+(-(u+(i-s)/(m?s-g:g-s))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:E,y:O,w:h,d:b,D:I,h:y,m:d,s:l,ms:a,Q:v}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},K="en",B={};B[K]=Ce;var de="$isDayjsObject",ie=function(f){return f instanceof Z||!(!f||!f[de])},z=function f(c,i,u){var s;if(!c)return K;if(typeof c=="string"){var m=c.toLowerCase();B[m]&&(s=m),i&&(B[m]=i,s=m);var g=c.split("-");if(!s&&g.length>1)return f(g[0])}else{var k=c.name;B[k]=c,s=k}return!u&&s&&(K=s),s||!u&&K},C=function(f,c){if(ie(f))return f.clone();var i=typeof c=="object"?c:{};return i.date=f,i.args=arguments,new Z(i)},S=we;S.l=z,S.i=ie,S.w=function(f,c){return C(f,{locale:c.$L,utc:c.$u,x:c.$x,$offset:c.$offset})};var Z=(function(){function f(i){this.$L=z(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[de]=!0}var c=f.prototype;return c.parse=function(i){this.$d=(function(u){var s=u.date,m=u.utc;if(s===null)return new Date(NaN);if(S.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var g=s.match(oe);if(g){var k=g[2]-1||0,T=(g[7]||"0").substring(0,3);return m?new Date(Date.UTC(g[1],k,g[3]||1,g[4]||0,g[5]||0,g[6]||0,T)):new Date(g[1],k,g[3]||1,g[4]||0,g[5]||0,g[6]||0,T)}}return new Date(s)})(i),this.init()},c.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},c.$utils=function(){return S},c.isValid=function(){return this.$d.toString()!==J},c.isSame=function(i,u){var s=C(i);return this.startOf(u)<=s&&s<=this.endOf(u)},c.isAfter=function(i,u){return C(i)<this.startOf(u)},c.isBefore=function(i,u){return this.endOf(u)<C(i)},c.$g=function(i,u,s){return S.u(i)?this[u]:this.set(s,i)},c.unix=function(){return Math.floor(this.valueOf()/1e3)},c.valueOf=function(){return this.$d.getTime()},c.startOf=function(i,u){var s=this,m=!!S.u(u)||u,g=S.p(i),k=function(H,q){var R=S.w(s.$u?Date.UTC(s.$y,q,H):new Date(s.$y,q,H),s);return m?R:R.endOf(b)},T=function(H,q){return S.w(s.toDate()[H].apply(s.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(q)),s)},w=this.$W,M=this.$M,A=this.$D,Y="set"+(this.$u?"UTC":"");switch(g){case O:return m?k(1,0):k(31,11);case E:return m?k(1,M):k(0,M+1);case h:var P=this.$locale().weekStart||0,F=(w<P?w+7:w)-P;return k(m?A-F:A+(6-F),M);case b:case I:return T(Y+"Hours",0);case y:return T(Y+"Minutes",1);case d:return T(Y+"Seconds",2);case l:return T(Y+"Milliseconds",3);default:return this.clone()}},c.endOf=function(i){return this.startOf(i,!1)},c.$set=function(i,u){var s,m=S.p(i),g="set"+(this.$u?"UTC":""),k=(s={},s[b]=g+"Date",s[I]=g+"Date",s[E]=g+"Month",s[O]=g+"FullYear",s[y]=g+"Hours",s[d]=g+"Minutes",s[l]=g+"Seconds",s[a]=g+"Milliseconds",s)[m],T=m===b?this.$D+(u-this.$W):u;if(m===E||m===O){var w=this.clone().set(I,1);w.$d[k](T),w.init(),this.$d=w.set(I,Math.min(this.$D,w.daysInMonth())).$d}else k&&this.$d[k](T);return this.init(),this},c.set=function(i,u){return this.clone().$set(i,u)},c.get=function(i){return this[S.p(i)]()},c.add=function(i,u){var s,m=this;i=Number(i);var g=S.p(u),k=function(M){var A=C(m);return S.w(A.date(A.date()+Math.round(M*i)),m)};if(g===E)return this.set(E,this.$M+i);if(g===O)return this.set(O,this.$y+i);if(g===b)return k(1);if(g===h)return k(7);var T=(s={},s[d]=o,s[y]=r,s[l]=n,s)[g]||1,w=this.$d.getTime()+i*T;return S.w(w,this)},c.subtract=function(i,u){return this.add(-1*i,u)},c.format=function(i){var u=this,s=this.$locale();if(!this.isValid())return s.invalidDate||J;var m=i||"YYYY-MM-DDTHH:mm:ssZ",g=S.z(this),k=this.$H,T=this.$m,w=this.$M,M=s.weekdays,A=s.months,Y=s.meridiem,P=function(q,R,N,X){return q&&(q[R]||q(u,m))||N[R].slice(0,X)},F=function(q){return S.s(k%12||12,q,"0")},H=Y||function(q,R,N){var X=q<12?"AM":"PM";return N?X.toLowerCase():X};return m.replace(Te,(function(q,R){return R||(function(N){switch(N){case"YY":return String(u.$y).slice(-2);case"YYYY":return S.s(u.$y,4,"0");case"M":return w+1;case"MM":return S.s(w+1,2,"0");case"MMM":return P(s.monthsShort,w,A,3);case"MMMM":return P(A,w);case"D":return u.$D;case"DD":return S.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return P(s.weekdaysMin,u.$W,M,2);case"ddd":return P(s.weekdaysShort,u.$W,M,3);case"dddd":return M[u.$W];case"H":return String(k);case"HH":return S.s(k,2,"0");case"h":return F(1);case"hh":return F(2);case"a":return H(k,T,!0);case"A":return H(k,T,!1);case"m":return String(T);case"mm":return S.s(T,2,"0");case"s":return String(u.$s);case"ss":return S.s(u.$s,2,"0");case"SSS":return S.s(u.$ms,3,"0");case"Z":return g}return null})(q)||g.replace(":","")}))},c.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},c.diff=function(i,u,s){var m,g=this,k=S.p(u),T=C(i),w=(T.utcOffset()-this.utcOffset())*o,M=this-T,A=function(){return S.m(g,T)};switch(k){case O:m=A()/12;break;case E:m=A();break;case v:m=A()/3;break;case h:m=(M-w)/6048e5;break;case b:m=(M-w)/864e5;break;case y:m=M/r;break;case d:m=M/o;break;case l:m=M/n;break;default:m=M}return s?m:S.a(m)},c.daysInMonth=function(){return this.endOf(E).$D},c.$locale=function(){return B[this.$L]},c.locale=function(i,u){if(!i)return this.$L;var s=this.clone(),m=z(i,u,!0);return m&&(s.$L=m),s},c.clone=function(){return S.w(this.$d,this)},c.toDate=function(){return new Date(this.valueOf())},c.toJSON=function(){return this.isValid()?this.toISOString():null},c.toISOString=function(){return this.$d.toISOString()},c.toString=function(){return this.$d.toUTCString()},f})(),fe=Z.prototype;return C.prototype=fe,[["$ms",a],["$s",l],["$m",d],["$H",y],["$W",b],["$M",E],["$y",O],["$D",I]].forEach((function(f){fe[f[1]]=function(c){return this.$g(c,f[0],f[1])}})),C.extend=function(f,c){return f.$i||(f(c,Z,C),f.$i=!0),C},C.locale=z,C.isDayjs=ie,C.unix=function(f){return C(1e3*f)},C.en=B[K],C.Ls=B,C.p={},C}))})(ne)),ne.exports}var Oe=qe();const Q=Me(Oe);function W(){const e=document.getElementById("from-date"),t=document.getElementById("to-date"),n=document.getElementById("quick-select-content"),o=document.getElementById("from-today-link"),r=document.getElementById("to-today-link"),a=document.getElementById("mode-toggle-container"),l=a?.querySelectorAll("input[type='radio']");return{fromDateInput:e,toDateInput:t,quickSelectsContainer:n,fromTodayLink:o,toTodayLink:r,modeToggleContainer:a,modeToggleInputs:l}}function Ae(){const{fromDate:e,toDate:t}=x();e||L.set.fromDate(new Date().toISOString().split("T")[0]),t||L.set.toDate(new Date().toISOString().split("T")[0]);const{fromDateInput:n,toDateInput:o,fromTodayLink:r,toTodayLink:a}=W();if(!(n instanceof HTMLInputElement)||!(o instanceof HTMLInputElement)||!(r instanceof HTMLAnchorElement)||!(a instanceof HTMLAnchorElement)){console.error("From date, to date input, from today link or to today link not found");return}n.value=e?new Date(e).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],o.value=t?new Date(t).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],r.addEventListener("click",l=>{l.preventDefault(),n.value=Q().format("YYYY-MM-DD"),L.set.fromDate(n.value),D.emit(p.FROM_DATE_CHANGED,{fromDate:n.value}),D.emit(p.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),L.remove.quickSelect()}),a.addEventListener("click",l=>{l.preventDefault(),o.value=Q().format("YYYY-MM-DD"),L.set.toDate(o.value),D.emit(p.TO_DATE_CHANGED,{toDate:o.value}),D.emit(p.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),D.emit(p.QUICK_SELECT_REMOVED_FROM_URL),L.remove.quickSelect()}),n.addEventListener("click",()=>{D.emit(p.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),D.emit(p.QUICK_SELECT_REMOVED_FROM_URL),L.remove.quickSelect()}),o.addEventListener("click",()=>{D.emit(p.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),D.emit(p.QUICK_SELECT_REMOVED_FROM_URL),L.remove.quickSelect()}),n.addEventListener("change",l=>{if(!(l.target instanceof HTMLInputElement)){console.error("From date input not found");return}L.set.fromDate(l.target.value),D.emit(p.FROM_DATE_CHANGED,{fromDate:l.target.value})}),o.addEventListener("change",l=>{if(!(l.target instanceof HTMLInputElement)){console.error("To date input not found");return}L.set.toDate(l.target.value),D.emit(p.TO_DATE_CHANGED,{toDate:l.target.value})}),D.on(p.QUICK_SELECT_CLICKED,De),D.on(p.MODE_CHANGED,De)}function De(){const{mode:e,fromDate:t,quickSelect:n}=x(),{fromDateInput:o,toDateInput:r}=W(),a=$.get.quickSelects().find(d=>d.id===n);if(!(o instanceof HTMLInputElement)||!(r instanceof HTMLInputElement)){console.error("From date or to date input not found");return}if(!a){console.error("Quick select in localstorage not found to recalculate dates");return}if(a.date.match(/^\d{2}-\d{2}$/)){if(e==="since"){const d=Q(t),y=Q(`${a.date}-${d.year()}`,"DD-MM-YYYY");y.isBefore(d)?(r.value=y.format("YYYY-MM-DD"),L.set.toDate(r.value)):(r.value=y.subtract(1,"year").format("YYYY-MM-DD"),L.set.toDate(r.value))}if(e==="until"){const d=Q(t),y=Q(`${a.date}-${d.year()}`,"DD-MM-YYYY");y.isAfter(d)?(r.value=y.format("YYYY-MM-DD"),L.set.toDate(r.value)):(r.value=y.add(1,"year").format("YYYY-MM-DD"),L.set.toDate(r.value))}}else r.value=a.date,L.set.toDate(r.value)}function Qe(){const{mode:e}=x();e||L.set.mode("until");const{modeToggleContainer:t}=W();if(!(t instanceof HTMLDivElement)){console.error("Mode toggle container not found");return}D.on(p.QUICK_SELECT_CLICKED,ye),D.on(p.ENABLE_MODE_CONTROLS,({shouldEnable:o})=>{ce(o)});const{modeToggleInputs:n}=W();for(const o of n){if(!(o instanceof HTMLInputElement)){console.error("Mode toggle input not found");return}o.addEventListener("change",r=>{if(!(r.target instanceof HTMLInputElement)){console.error("Mode toggle input not found");return}if(r.target.value!=="since"&&r.target.value!=="until"){console.error("Invalid mode");return}L.set.mode(r.target.value),D.emit(p.MODE_CHANGED,{mode:r.target.value})})}ye()}function ye(){const{fromDate:e,quickSelect:t}=x(),n=$.get.quickSelects().find(o=>o.id===t);if(n)if(n.type==="absolute"){ce(!1);const o=Q(e);Q(n.date).isAfter(o)?(document.getElementById("until-radio").checked=!0,document.getElementById("since-radio").checked=!1,D.emit(p.MODE_CHANGED,{mode:"until"}),L.set.mode("until")):(document.getElementById("since-radio").checked=!0,document.getElementById("until-radio").checked=!1,D.emit(p.MODE_CHANGED,{mode:"since"}),L.set.mode("since"))}else ce(!0)}function ce(e){const{modeToggleInputs:t,modeToggleContainer:n}=W();if(!(t instanceof NodeList)){console.error("Mode toggle inputs not found");return}if(!(n instanceof HTMLDivElement)){console.error("Mode toggle container not found");return}e?(n.classList.remove("opacity-50"),n.classList.remove("pointer-events-none")):(n.classList.add("opacity-50"),n.classList.add("pointer-events-none"));for(const o of t)o.disabled=!e}function xe(){D.on(p.QUICK_SELECT_CLICKED,G),D.on(p.MODE_CHANGED,G),D.on(p.FROM_DATE_CHANGED,G),D.on(p.TO_DATE_CHANGED,G),G()}function G(){const{fromDate:e,toDate:t,mode:n}=x();if(!e||!t||!n){console.error("From date, to date or mode not found");return}const o=Q(e),r=Q(t),a=document.getElementById("days-result"),l=o.diff(r,"day");a&&(a.textContent=Math.abs(l).toString()),D.on(p.QUICK_SELECT_REMOVED_FROM_URL,()=>Se(!0)),Se()}function Se(e=!1){const t=document.getElementById("quick-select-result"),{quickSelect:n,toDate:o,fromDate:r,mode:a}=x();if(!t){console.error("Quick select result div not found");return}if(t&&(t.textContent=""),!n||e){const l=Q(o),d=Q(r);l.isAfter(d)?t.textContent="from now":t.textContent="ago"}else{const d=$.get.quickSelects().find(y=>y.id===n);if(!d)return;t&&(t.textContent=`${a} ${d.label}`)}}function Ue(){const e=document.querySelector("#quick-select-header a"),t=document.getElementById("close-manage-quick-selects-dialog"),n=document.getElementById("backdrop"),o=document.getElementById("manage-quick-selects-dialog"),r=document.getElementById("add-quick-select-form");if(!e||!t||!n||!o||!r){console.table({manageButton:!!e,closeButton:!!t,backdrop:!!n,dialog:!!o,form:!!r});return}e.addEventListener("click",Re),t.addEventListener("click",ke),n.addEventListener("click",ke),r.addEventListener("submit",Pe),o.querySelectorAll('input[name="date-type"]').forEach(l=>{l.addEventListener("change",le)}),V()}function Re(){const e=document.getElementById("backdrop"),t=document.getElementById("manage-quick-selects-dialog");if(!e||!t)return;e.classList.remove("hidden"),t.classList.remove("hidden"),t.classList.add("block"),e.offsetWidth,t.offsetWidth,e.classList.remove("opacity-0"),t.classList.remove("opacity-0");const{edit:n}=x();n&&be(n),V()}function ke(){const e=document.getElementById("backdrop"),t=document.getElementById("manage-quick-selects-dialog");if(!e||!t)return;e.classList.add("opacity-0"),t.classList.add("opacity-0");const n=document.getElementById("add-quick-select-form");n&&n.reset(),Le(),L.remove.edit(),ue(),setTimeout(()=>{e.classList.add("hidden"),t.classList.add("hidden"),t.classList.remove("block")},300)}function V(){const e=document.getElementById("quick-selects-to-manage");if(!e){console.error("Quick selects container not found");return}const t=$.get.quickSelects();e.innerHTML=t.map(r=>je(r)).join(""),e.querySelectorAll(".edit-button").forEach(r=>{r.addEventListener("click",a=>{const d=a.currentTarget.closest("[data-id]")?.getAttribute("data-id");d&&Be(d)})}),e.querySelectorAll(".delete-button").forEach(r=>{r.addEventListener("click",a=>{const d=a.currentTarget.closest("[data-id]")?.getAttribute("data-id");d&&Ke(d)})}),Fe(e)}function le(e){const t=e.target,n=document.getElementById("date-input-container");n&&(t.value==="relative"?n.innerHTML=`
      <label
        for="quick-select-date"
        class="text-sm font-semibold text-slate-700 dark:text-slate-200"
      >Date (DD/MM)</label>
      <input
        type="text"
        id="quick-select-date"
        placeholder="25/12"
        pattern="\\d{2}/\\d{2}"
        required
        class="mt-1 w-full rounded-xl border border-slate-200 px-4 py-3 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-sky-700 dark:focus:border-sky-600"
      />
    `:n.innerHTML=`
      <label
        for="quick-select-date"
        class="text-sm font-semibold text-slate-700 dark:text-slate-200"
      >Date</label>
      <input
        type="date"
        id="quick-select-date"
        required
        class="mt-1 w-full rounded-xl border border-slate-200 px-4 py-3 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-sky-700 dark:focus:border-sky-600"
      />
    `)}function ve(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function U(e){const t=document.getElementById("add-quick-select-form");if(!t)return;const n=t.querySelector(".error-message");n&&n.remove();const o=document.createElement("div");o.className="mt-4 error-message col-span-full bg-red-50 text-red-700 border border-red-200 rounded-xl p-3 text-sm dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",o.textContent=e,t.appendChild(o)}function Le(){const e=document.querySelector(".error-message");e&&e.remove()}function be(e){const n=$.get.quickSelects().find(d=>d.id===e);if(!n){console.error("Quick select not found for editing");return}const o=document.getElementById("quick-select-name"),r=document.getElementById("quick-select-date"),a=document.getElementById("date-type-relative"),l=document.getElementById("date-type-absolute");if(!o||!r||!a||!l){console.error("Form inputs not found");return}if(o.value=n.label,n.type==="relative"){a.checked=!0,le({target:a});const[d,y]=n.date.split("-");setTimeout(()=>{const b=document.getElementById("quick-select-date");b&&(b.value=`${y}/${d}`)},0)}else l.checked=!0,le({target:l}),setTimeout(()=>{const d=document.getElementById("quick-select-date");d&&(d.value=n.date)},0);ue()}function ue(){const{edit:e}=x(),t=document.querySelector("#add-quick-select-form button[type='submit']");if(t){const n=t.querySelector("svg");e?(t.innerHTML="",n&&(n.querySelector("use")?.setAttribute("href","/svg-icons.svg#save"),t.appendChild(n)),t.appendChild(document.createTextNode("Update Quick Select"))):(t.innerHTML="",n&&(n.querySelector("use")?.setAttribute("href","/svg-icons.svg#plus"),t.appendChild(n)),t.appendChild(document.createTextNode("Add Quick Select")))}}function Be(e){L.set.edit(e),be(e)}function Pe(e){e.preventDefault(),Le();const{edit:t}=x();t?Ye(e,t):He(e)}function He(e){const t=e.target,n=t.querySelector("#quick-select-name"),o=t.querySelector("#quick-select-date"),r=t.querySelector('input[name="date-type"]:checked');if(!n||!o||!r){console.error("Form inputs not found");return}const a=n.value.trim(),l=o.value.trim(),d=r.value;if(!a||!l){U("Please fill in all fields");return}const y=ve(a);if(!y){U("Please enter a valid name");return}const b=$.get.quickSelects();if(b.some(v=>v.id===y)){U("A quick select with this name already exists");return}let h=l;if(d==="relative"){const v=l.match(/^(\d{2})\/(\d{2})$/);if(!v){U("Date must be in DD/MM format (e.g., 25/12)");return}const[,O,I]=v;h=`${I}-${O}`}else{if(!l.match(/^\d{4}-\d{2}-\d{2}$/)){U("Invalid date format");return}h=l}const E={id:y,label:a,date:h,type:d};b.push(E),$.set.quickSelects(b),D.emit(p.QUICK_SELECT_ADDED,{quickSelect:E}),t.reset(),V()}function Ye(e,t){const n=e.target,o=n.querySelector("#quick-select-name"),r=n.querySelector("#quick-select-date"),a=n.querySelector('input[name="date-type"]:checked');if(!o||!r||!a){console.error("Form inputs not found");return}const l=o.value.trim(),d=r.value.trim(),y=a.value;if(!l||!d){U("Please fill in all fields");return}const b=ve(l);if(!b){U("Please enter a valid name");return}const h=$.get.quickSelects();if(b!==t&&h.some(I=>I.id===b)){U("A quick select with this name already exists");return}let E=d;if(y==="relative"){const I=d.match(/^(\d{2})\/(\d{2})$/);if(!I){U("Date must be in DD/MM format (e.g., 25/12)");return}const[,J,oe]=I;E=`${oe}-${J}`}else{if(!d.match(/^\d{4}-\d{2}-\d{2}$/)){U("Invalid date format");return}E=d}const v={id:b,label:l,date:E,type:y},O=h.map(I=>I.id===t?v:I);$.set.quickSelects(O),D.emit(p.QUICK_SELECT_UPDATED,{oldId:t,quickSelect:v}),n.reset(),L.remove.edit(),ue(),V()}function Ke(e){confirm("Are you sure you want to delete this quick select?")&&($.remove.quickSelect(e),D.emit(p.QUICK_SELECT_DELETED,{id:e}),V())}function Fe(e){const t=e.querySelectorAll("[data-id]");let n=null,o=null,r=null;const a=(h,E)=>{const v=document.elementFromPoint(h,E);return v?v.closest("[data-id]"):null},l=(h,E)=>{if(!n||h===n)return;const v=h.getBoundingClientRect();E<v.top+v.height/2?e.insertBefore(n,h):e.insertBefore(n,h.nextSibling)},d=h=>{if(!n||r!==h.pointerId)return;const E=a(h.clientX,h.clientY);E&&l(E,h.clientY),h.preventDefault()},y=h=>{h&&r!==h.pointerId||(n&&(n.classList.remove("opacity-50"),n=null,Ne()),o&&r!==null&&o.releasePointerCapture&&o.releasePointerCapture(r),o=null,r=null,e.removeEventListener("pointermove",d),e.removeEventListener("pointerup",y),e.removeEventListener("pointercancel",y))},b=(h,E,v)=>{v.button!==0&&v.pointerType!=="touch"||(n&&n!==E&&n.classList.remove("opacity-50"),n=E,o=h,r=v.pointerId,n.classList.add("opacity-50"),h.setPointerCapture&&h.setPointerCapture(v.pointerId),e.addEventListener("pointermove",d),e.addEventListener("pointerup",y),e.addEventListener("pointercancel",y),v.preventDefault())};t.forEach(h=>{const E=h.querySelector(".drag-handle");E&&(E.style.touchAction="none",E.addEventListener("pointerdown",v=>b(E,h,v)))})}function Ne(){const e=document.getElementById("quick-selects-to-manage");if(!e)return;const t=e.querySelectorAll("[data-id]"),n=Array.from(t).map(a=>a.getAttribute("data-id")),o=$.get.quickSelects(),r=n.map(a=>o.find(l=>l.id===a)).filter(a=>a!==void 0);$.set.quickSelects(r),D.emit(p.QUICK_SELECT_REORDERED)}function je(e){const t=e.type==="relative",n=t?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-400";let o=e.date;if(t&&e.date.match(/^\d{2}-\d{2}$/)){const[r,a]=e.date.split("-");o=`${a}/${r}`}else if(!t&&e.date.match(/^\d{4}-\d{2}-\d{2}$/)){const[r,a,l]=e.date.split("-");o=`${l}/${a}/${r}`}return`
    <div
      class="flex items-center gap-2 md:gap-4 bg-slate-50 dark:bg-slate-900 rounded-xl p-2 md:p-4 border border-slate-200 dark:border-slate-700 group hover:border-slate-300 dark:hover:border-slate-600 transition-all"
      data-id="${e.id}"
    >
      <button
        class="drag-handle cursor-move text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors touch-none"
      >
        <svg class="w-5 h-5">
          <use href="/svg-icons.svg#reorder"></use>
        </svg>
      </button>
      <div class="flex-1 min-w-0">
        <div class="font-semibold text-slate-900 dark:text-slate-100">
          ${e.label}
        </div>
        <div
          class="text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2"
        >
          <span>${o}</span>
          <span
            class="text-xs px-2 py-0.5 rounded-full ${n}"
          >${t?"Relative":"Absolute"}</span>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button
          class="edit-button btn-icon btn-icon-secondary opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"
        >
          <svg class="w-4 h-4">
            <use href="/svg-icons.svg#edit"></use>
          </svg>
        </button>
        <button
          class="delete-button btn-icon btn-icon-secondary opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"
        >
          <svg class="w-4 h-4">
            <use href="/svg-icons.svg#trash"></use>
          </svg>
        </button>
      </div>
    </div>
  `}function Ge(){Ie(),Ae(),$e(),Qe(),xe(),Ue()}document.addEventListener("DOMContentLoaded",Ge);
//# sourceMappingURL=index-CFJNeeBP.js.map

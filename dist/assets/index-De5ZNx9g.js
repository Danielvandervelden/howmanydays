(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();const O={FROM_DATE:"fromDate",TO_DATE:"toDate",MODE:"mode",QUICK_SELECT:"quickSelect",EDIT:"edit"},Ee={QUICK_SELECTS:"quickSelects"},pe=[{id:"christmas",label:"Christmas",date:"12-25",type:"relative"},{id:"halloween",label:"Halloween",date:"10-31",type:"relative"},{id:"thanksgiving",label:"Thanksgiving",date:"11-28",type:"relative"},{id:"new-year",label:"New Year",date:"01-01",type:"relative"},{id:"easter",label:"Easter",date:"04-04",type:"relative"},{id:"valentines",label:"Valentine's Day",date:"02-14",type:"relative"},{id:"spring",label:"Spring",date:"03-20",type:"relative"},{id:"summer",label:"Summer",date:"06-21",type:"relative"},{id:"autumn",label:"Fall",date:"09-23",type:"relative"},{id:"winter",label:"Winter",date:"12-21",type:"relative"}],le="btn-primary",ue="btn-secondary";function ae({quickSelect:e,isActive:n}){const t=document.createElement("button");return t.setAttribute("data-id",e.id),t.classList.add("quick-select-button"),t.classList.add(n?le:ue),t.disabled=n,t.setAttribute("data-date",e.date),t.textContent=e.label,t}const Z=new Map,p={emit:(e,n)=>{const t=new CustomEvent(e,{detail:n});console.log(`[Events] Emitting ${e}`,n),document.dispatchEvent(t)},on:(e,n)=>{console.log(`[Events] Registering listener for ${e}`),Z.has(e)||(Z.set(e,new Set),document.addEventListener(e,o=>{const r=o;console.log(`[Events] Received ${e}`,r.detail);const a=Z.get(e);a&&a.forEach(l=>{console.log(`[Events] Calling callback for ${e}`),l(r.detail)})}));const t=Z.get(e);t&&t.add(n)},off:(e,n)=>{const t=Z.get(e);t&&t.delete(n)}};function H(){const e=new URLSearchParams(window.location.search),n=e.get(O.FROM_DATE),t=e.get(O.TO_DATE),o=e.get(O.MODE),r=e.get(O.QUICK_SELECT),a=e.get(O.EDIT);return{fromDate:n,toDate:t,mode:o,quickSelect:r,edit:a}}var E=(e=>(e.QUICK_SELECT_CLICKED="quick-select-clicked",e.MODE_CHANGED="mode-changed",e.ENABLE_MODE_CONTROLS="enable-mode-controls",e.FROM_DATE_CHANGED="from-date-changed",e.TO_DATE_CHANGED="to-date-changed",e.QUICK_SELECT_DELETED="quick-select-deleted",e.QUICK_SELECT_ADDED="quick-select-added",e.QUICK_SELECT_UPDATED="quick-select-updated",e.QUICK_SELECT_REORDERED="quick-select-reordered",e.QUICK_SELECT_REMOVED_FROM_URL="quick-select-removed-from-url",e))(E||{});const $={get:{quickSelects:()=>{const e=localStorage.getItem(Ee.QUICK_SELECTS);return e?JSON.parse(e):[]}},set:{quickSelects:e=>{localStorage.setItem(Ee.QUICK_SELECTS,JSON.stringify(e))}},remove:{quickSelect:e=>{const n=$.get.quickSelects().filter(t=>t.id!==e);$.set.quickSelects(n)}}},k={set:{fromDate:e=>{const n=new URLSearchParams(window.location.search);n.set(O.FROM_DATE,e);const t=`${window.location.pathname}?${n.toString()}`;window.history.pushState({},"",t)},toDate:e=>{const n=new URLSearchParams(window.location.search);n.set(O.TO_DATE,e);const t=`${window.location.pathname}?${n.toString()}`;window.history.pushState({},"",t)},mode:e=>{const n=new URLSearchParams(window.location.search);n.set(O.MODE,e);const t=`${window.location.pathname}?${n.toString()}`;window.history.pushState({},"",t)},quickSelect:e=>{const n=new URLSearchParams(window.location.search);n.set(O.QUICK_SELECT,e);const t=`${window.location.pathname}?${n.toString()}`;window.history.pushState({},"",t)},edit:e=>{const n=new URLSearchParams(window.location.search);n.set(O.EDIT,e);const t=`${window.location.pathname}?${n.toString()}`;window.history.pushState({},"",t)}},remove:{fromDate:()=>{const e=new URLSearchParams(window.location.search);e.delete(O.FROM_DATE);const n=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",n)},toDate:()=>{const e=new URLSearchParams(window.location.search);e.delete(O.TO_DATE);const n=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",n)},mode:()=>{const e=new URLSearchParams(window.location.search);e.delete(O.MODE);const n=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",n)},quickSelect:()=>{const e=new URLSearchParams(window.location.search);e.delete(O.QUICK_SELECT);const n=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",n)},edit:()=>{const e=new URLSearchParams(window.location.search);e.delete(O.EDIT);const n=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",n)}}};function $e(){ye(),p.on(E.QUICK_SELECT_DELETED,({id:e})=>{const n=document.querySelector(`.quick-select-button[data-id="${e}"]`);n&&n.remove()}),p.on(E.QUICK_SELECT_REMOVED_FROM_URL,()=>{ye(!0)}),p.on(E.QUICK_SELECT_ADDED,({quickSelect:e})=>{const n=document.getElementById("quick-select-content");if(!(n instanceof HTMLDivElement)){console.error("Quick select container not found");return}const t=ae({quickSelect:e,isActive:!1});t.addEventListener("click",()=>{ie(e.id)}),n.appendChild(t)}),p.on(E.QUICK_SELECT_UPDATED,({oldId:e,quickSelect:n})=>{const t=document.querySelector(`.quick-select-button[data-id="${e}"]`);if(t)if(e!==n.id){if(!(document.getElementById("quick-select-content")instanceof HTMLDivElement)){console.error("Quick select container not found");return}const r=ae({quickSelect:n,isActive:!1});r.addEventListener("click",()=>{ie(n.id)}),t.replaceWith(r)}else{const o=t.querySelector("span");o&&(o.textContent=n.label)}}),p.on(E.QUICK_SELECT_REORDERED,()=>{const{quickSelect:e}=H(),n=document.getElementById("quick-select-content");if(!(n instanceof HTMLDivElement)){console.error("Quick select container not found");return}n.innerHTML="",$.get.quickSelects().forEach(o=>{const r=ae({quickSelect:o,isActive:o.id===e});r.addEventListener("click",()=>{ie(o.id)}),n.appendChild(r)})})}function ye(e=!1){const{quickSelect:n}=H();let t=$.get.quickSelects();t.length===0&&($.set.quickSelects(pe),t=pe);const o=document.getElementById("quick-select-content");if(!(o instanceof HTMLDivElement)){console.error("Quick select container not found");return}o.innerHTML="",t.forEach(r=>{const a=ae({quickSelect:r,isActive:e?!1:r.id===n});a.addEventListener("click",()=>{ie(r.id)}),o.appendChild(a)})}function ie(e){k.set.quickSelect(e);const n=$.get.quickSelects().find(o=>o.id===e);if(!n){console.error("Quick select in localstorage not found to handle quick select button click");return}p.emit(E.QUICK_SELECT_CLICKED,{quickSelect:n});const t=document.querySelectorAll(".quick-select-button");for(const o of t)o instanceof HTMLButtonElement&&(o.getAttribute("data-id")===e?(o.classList.remove(ue),o.classList.add(le),o.disabled=!0):(o.classList.remove(le),o.classList.add(ue),o.disabled=!1))}function Ie(){const e=document.getElementById("current-time"),n=document.getElementById("current-date");if(!e||!n){console.error("Current time or date div not found");return}De(e,n),setInterval(()=>{De(e,n)},1e3)}function De(e,n){const t=navigator.language,o=new Date,r=o.toLocaleTimeString(),a=o.toLocaleDateString(t,{day:"numeric",month:"long",year:"numeric"});e.textContent=r,n.textContent=a}function _e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var se={exports:{}},qe=se.exports,Se;function Oe(){return Se||(Se=1,(function(e,n){(function(t,o){e.exports=o()})(qe,(function(){var t=1e3,o=6e4,r=36e5,a="millisecond",l="second",d="minute",D="hour",L="day",Q="week",h="month",I="quarter",b="year",S="date",A="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var c=["th","st","nd","rd"],i=f%100;return"["+f+(c[(i-20)%10]||c[i]||c[0])+"]"}},K=function(f,c,i){var u=String(f);return!u||u.length>=c?f:""+Array(c+1-u.length).join(i)+f},W={s:K,z:function(f){var c=-f.utcOffset(),i=Math.abs(c),u=Math.floor(i/60),s=i%60;return(c<=0?"+":"-")+K(u,2,"0")+":"+K(s,2,"0")},m:function f(c,i){if(c.date()<i.date())return-f(i,c);var u=12*(i.year()-c.year())+(i.month()-c.month()),s=c.clone().add(u,h),m=i-s<0,g=c.clone().add(u+(m?-1:1),h);return+(-(u+(i-s)/(m?s-g:g-s))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:h,y:b,w:Q,d:L,D:S,h:D,m:d,s:l,ms:a,Q:I}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},_="en",F={};F[_]=Y;var ge="$isDayjsObject",ce=function(f){return f instanceof oe||!(!f||!f[ge])},ne=function f(c,i,u){var s;if(!c)return _;if(typeof c=="string"){var m=c.toLowerCase();F[m]&&(s=m),i&&(F[m]=i,s=m);var g=c.split("-");if(!s&&g.length>1)return f(g[0])}else{var v=c.name;F[v]=c,s=v}return!u&&s&&(_=s),s||!u&&_},w=function(f,c){if(ce(f))return f.clone();var i=typeof c=="object"?c:{};return i.date=f,i.args=arguments,new oe(i)},y=W;y.l=ne,y.i=ce,y.w=function(f,c){return w(f,{locale:c.$L,utc:c.$u,x:c.$x,$offset:c.$offset})};var oe=(function(){function f(i){this.$L=ne(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[ge]=!0}var c=f.prototype;return c.parse=function(i){this.$d=(function(u){var s=u.date,m=u.utc;if(s===null)return new Date(NaN);if(y.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var g=s.match(C);if(g){var v=g[2]-1||0,T=(g[7]||"0").substring(0,3);return m?new Date(Date.UTC(g[1],v,g[3]||1,g[4]||0,g[5]||0,g[6]||0,T)):new Date(g[1],v,g[3]||1,g[4]||0,g[5]||0,g[6]||0,T)}}return new Date(s)})(i),this.init()},c.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},c.$utils=function(){return y},c.isValid=function(){return this.$d.toString()!==A},c.isSame=function(i,u){var s=w(i);return this.startOf(u)<=s&&s<=this.endOf(u)},c.isAfter=function(i,u){return w(i)<this.startOf(u)},c.isBefore=function(i,u){return this.endOf(u)<w(i)},c.$g=function(i,u,s){return y.u(i)?this[u]:this.set(s,i)},c.unix=function(){return Math.floor(this.valueOf()/1e3)},c.valueOf=function(){return this.$d.getTime()},c.startOf=function(i,u){var s=this,m=!!y.u(u)||u,g=y.p(i),v=function(G,x){var N=y.w(s.$u?Date.UTC(s.$y,x,G):new Date(s.$y,x,G),s);return m?N:N.endOf(L)},T=function(G,x){return y.w(s.toDate()[G].apply(s.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(x)),s)},M=this.$W,q=this.$M,U=this.$D,V="set"+(this.$u?"UTC":"");switch(g){case b:return m?v(1,0):v(31,11);case h:return m?v(1,q):v(0,q+1);case Q:var j=this.$locale().weekStart||0,J=(M<j?M+7:M)-j;return v(m?U-J:U+(6-J),q);case L:case S:return T(V+"Hours",0);case D:return T(V+"Minutes",1);case d:return T(V+"Seconds",2);case l:return T(V+"Milliseconds",3);default:return this.clone()}},c.endOf=function(i){return this.startOf(i,!1)},c.$set=function(i,u){var s,m=y.p(i),g="set"+(this.$u?"UTC":""),v=(s={},s[L]=g+"Date",s[S]=g+"Date",s[h]=g+"Month",s[b]=g+"FullYear",s[D]=g+"Hours",s[d]=g+"Minutes",s[l]=g+"Seconds",s[a]=g+"Milliseconds",s)[m],T=m===L?this.$D+(u-this.$W):u;if(m===h||m===b){var M=this.clone().set(S,1);M.$d[v](T),M.init(),this.$d=M.set(S,Math.min(this.$D,M.daysInMonth())).$d}else v&&this.$d[v](T);return this.init(),this},c.set=function(i,u){return this.clone().$set(i,u)},c.get=function(i){return this[y.p(i)]()},c.add=function(i,u){var s,m=this;i=Number(i);var g=y.p(u),v=function(q){var U=w(m);return y.w(U.date(U.date()+Math.round(q*i)),m)};if(g===h)return this.set(h,this.$M+i);if(g===b)return this.set(b,this.$y+i);if(g===L)return v(1);if(g===Q)return v(7);var T=(s={},s[d]=o,s[D]=r,s[l]=t,s)[g]||1,M=this.$d.getTime()+i*T;return y.w(M,this)},c.subtract=function(i,u){return this.add(-1*i,u)},c.format=function(i){var u=this,s=this.$locale();if(!this.isValid())return s.invalidDate||A;var m=i||"YYYY-MM-DDTHH:mm:ssZ",g=y.z(this),v=this.$H,T=this.$m,M=this.$M,q=s.weekdays,U=s.months,V=s.meridiem,j=function(x,N,z,re){return x&&(x[N]||x(u,m))||z[N].slice(0,re)},J=function(x){return y.s(v%12||12,x,"0")},G=V||function(x,N,z){var re=x<12?"AM":"PM";return z?re.toLowerCase():re};return m.replace(R,(function(x,N){return N||(function(z){switch(z){case"YY":return String(u.$y).slice(-2);case"YYYY":return y.s(u.$y,4,"0");case"M":return M+1;case"MM":return y.s(M+1,2,"0");case"MMM":return j(s.monthsShort,M,U,3);case"MMMM":return j(U,M);case"D":return u.$D;case"DD":return y.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return j(s.weekdaysMin,u.$W,q,2);case"ddd":return j(s.weekdaysShort,u.$W,q,3);case"dddd":return q[u.$W];case"H":return String(v);case"HH":return y.s(v,2,"0");case"h":return J(1);case"hh":return J(2);case"a":return G(v,T,!0);case"A":return G(v,T,!1);case"m":return String(T);case"mm":return y.s(T,2,"0");case"s":return String(u.$s);case"ss":return y.s(u.$s,2,"0");case"SSS":return y.s(u.$ms,3,"0");case"Z":return g}return null})(x)||g.replace(":","")}))},c.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},c.diff=function(i,u,s){var m,g=this,v=y.p(u),T=w(i),M=(T.utcOffset()-this.utcOffset())*o,q=this-T,U=function(){return y.m(g,T)};switch(v){case b:m=U()/12;break;case h:m=U();break;case I:m=U()/3;break;case Q:m=(q-M)/6048e5;break;case L:m=(q-M)/864e5;break;case D:m=q/r;break;case d:m=q/o;break;case l:m=q/t;break;default:m=q}return s?m:y.a(m)},c.daysInMonth=function(){return this.endOf(h).$D},c.$locale=function(){return F[this.$L]},c.locale=function(i,u){if(!i)return this.$L;var s=this.clone(),m=ne(i,u,!0);return m&&(s.$L=m),s},c.clone=function(){return y.w(this.$d,this)},c.toDate=function(){return new Date(this.valueOf())},c.toJSON=function(){return this.isValid()?this.toISOString():null},c.toISOString=function(){return this.$d.toISOString()},c.toString=function(){return this.$d.toUTCString()},f})(),he=oe.prototype;return w.prototype=he,[["$ms",a],["$s",l],["$m",d],["$H",D],["$W",L],["$M",h],["$y",b],["$D",S]].forEach((function(f){he[f[1]]=function(c){return this.$g(c,f[0],f[1])}})),w.extend=function(f,c){return f.$i||(f(c,oe,w),f.$i=!0),w},w.locale=ne,w.isDayjs=ce,w.unix=function(f){return w(1e3*f)},w.en=F[_],w.Ls=F,w.p={},w}))})(se)),se.exports}var Ae=Oe();const B=_e(Ae);function ee(){const e=document.getElementById("from-date"),n=document.getElementById("to-date"),t=document.getElementById("quick-select-content"),o=document.getElementById("from-today-link"),r=document.getElementById("to-today-link"),a=document.getElementById("mode-toggle-container"),l=a?.querySelectorAll("input[type='radio']");return{fromDateInput:e,toDateInput:n,quickSelectsContainer:t,fromTodayLink:o,toTodayLink:r,modeToggleContainer:a,modeToggleInputs:l}}function xe(){const{fromDate:e,toDate:n}=H();e||k.set.fromDate(new Date().toISOString().split("T")[0]),n||k.set.toDate(new Date().toISOString().split("T")[0]);const{fromDateInput:t,toDateInput:o,fromTodayLink:r,toTodayLink:a}=ee();if(!(t instanceof HTMLInputElement)||!(o instanceof HTMLInputElement)||!(r instanceof HTMLAnchorElement)||!(a instanceof HTMLAnchorElement)){console.error("From date, to date input, from today link or to today link not found");return}t.value=e?new Date(e).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],o.value=n?new Date(n).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],r.addEventListener("click",l=>{l.preventDefault(),t.value=B().format("YYYY-MM-DD"),k.set.fromDate(t.value),p.emit(E.FROM_DATE_CHANGED,{fromDate:t.value}),p.emit(E.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),k.remove.quickSelect()}),a.addEventListener("click",l=>{l.preventDefault(),o.value=B().format("YYYY-MM-DD"),k.set.toDate(o.value),p.emit(E.TO_DATE_CHANGED,{toDate:o.value}),p.emit(E.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),p.emit(E.QUICK_SELECT_REMOVED_FROM_URL),k.remove.quickSelect()}),t.addEventListener("click",()=>{p.emit(E.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),p.emit(E.QUICK_SELECT_REMOVED_FROM_URL),k.remove.quickSelect()}),o.addEventListener("click",()=>{p.emit(E.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),p.emit(E.QUICK_SELECT_REMOVED_FROM_URL),k.remove.quickSelect()}),t.addEventListener("change",l=>{if(!(l.target instanceof HTMLInputElement)){console.error("From date input not found");return}k.set.fromDate(l.target.value),p.emit(E.FROM_DATE_CHANGED,{fromDate:l.target.value})}),o.addEventListener("change",l=>{if(!(l.target instanceof HTMLInputElement)){console.error("To date input not found");return}k.set.toDate(l.target.value),p.emit(E.TO_DATE_CHANGED,{toDate:l.target.value})}),p.on(E.QUICK_SELECT_CLICKED,ve),p.on(E.MODE_CHANGED,ve)}function ve(){const{mode:e,fromDate:n,quickSelect:t}=H(),{fromDateInput:o,toDateInput:r}=ee(),a=$.get.quickSelects().find(d=>d.id===t);if(!(o instanceof HTMLInputElement)||!(r instanceof HTMLInputElement)){console.error("From date or to date input not found");return}if(!a){console.error("Quick select in localstorage not found to recalculate dates");return}if(a.date.match(/^\d{2}-\d{2}$/)){if(e==="since"){const d=B(n),D=B(`${a.date}-${d.year()}`,"DD-MM-YYYY");D.isBefore(d)?(r.value=D.format("YYYY-MM-DD"),k.set.toDate(r.value)):(r.value=D.subtract(1,"year").format("YYYY-MM-DD"),k.set.toDate(r.value))}if(e==="until"){const d=B(n),D=B(`${a.date}-${d.year()}`,"DD-MM-YYYY");D.isAfter(d)?(r.value=D.format("YYYY-MM-DD"),k.set.toDate(r.value)):(r.value=D.add(1,"year").format("YYYY-MM-DD"),k.set.toDate(r.value))}}else r.value=a.date,k.set.toDate(r.value)}function Qe(){const{mode:e}=H();e||k.set.mode("until");const{modeToggleContainer:n}=ee();if(!(n instanceof HTMLDivElement)){console.error("Mode toggle container not found");return}p.on(E.QUICK_SELECT_CLICKED,ke),p.on(E.ENABLE_MODE_CONTROLS,({shouldEnable:o})=>{de(o)});const{modeToggleInputs:t}=ee();for(const o of t){if(!(o instanceof HTMLInputElement)){console.error("Mode toggle input not found");return}o.addEventListener("change",r=>{if(!(r.target instanceof HTMLInputElement)){console.error("Mode toggle input not found");return}if(r.target.value!=="since"&&r.target.value!=="until"){console.error("Invalid mode");return}k.set.mode(r.target.value),p.emit(E.MODE_CHANGED,{mode:r.target.value})})}ke()}function ke(){const{fromDate:e,quickSelect:n}=H(),t=$.get.quickSelects().find(o=>o.id===n);if(t)if(t.type==="absolute"){de(!1);const o=B(e);B(t.date).isAfter(o)?(document.getElementById("until-radio").checked=!0,document.getElementById("since-radio").checked=!1,p.emit(E.MODE_CHANGED,{mode:"until"}),k.set.mode("until")):(document.getElementById("since-radio").checked=!0,document.getElementById("until-radio").checked=!1,p.emit(E.MODE_CHANGED,{mode:"since"}),k.set.mode("since"))}else de(!0)}function de(e){const{modeToggleInputs:n,modeToggleContainer:t}=ee();if(!(n instanceof NodeList)){console.error("Mode toggle inputs not found");return}if(!(t instanceof HTMLDivElement)){console.error("Mode toggle container not found");return}e?(t.classList.remove("opacity-50"),t.classList.remove("pointer-events-none")):(t.classList.add("opacity-50"),t.classList.add("pointer-events-none"));for(const o of n)o.disabled=!e}function Ue(){p.on(E.QUICK_SELECT_CLICKED,X),p.on(E.MODE_CHANGED,X),p.on(E.FROM_DATE_CHANGED,X),p.on(E.TO_DATE_CHANGED,X),X()}function X(){const{fromDate:e,toDate:n,mode:t}=H();if(!e||!n||!t){console.error("From date, to date or mode not found");return}const o=B(e),r=B(n),a=document.getElementById("days-result"),l=o.diff(r,"day");a&&(a.textContent=Math.abs(l).toString()),p.on(E.QUICK_SELECT_REMOVED_FROM_URL,()=>Le(!0)),Le()}function Le(e=!1){const n=document.getElementById("quick-select-result"),{quickSelect:t,toDate:o,fromDate:r,mode:a}=H();if(!n){console.error("Quick select result div not found");return}if(n&&(n.textContent=""),!t||e){const l=B(o),d=B(r);l.isAfter(d)?n.textContent="from now":n.textContent="ago"}else{const d=$.get.quickSelects().find(D=>D.id===t);if(!d)return;n&&(n.textContent=`${a} ${d.label}`)}}function Be(){const e=document.querySelector("#quick-select-header a"),n=document.getElementById("close-manage-quick-selects-dialog"),t=document.getElementById("backdrop"),o=document.getElementById("manage-quick-selects-dialog"),r=document.getElementById("add-quick-select-form");if(!e||!n||!t||!o||!r){console.table({manageButton:!!e,closeButton:!!n,backdrop:!!t,dialog:!!o,form:!!r});return}e.addEventListener("click",Re),n.addEventListener("click",be),t.addEventListener("click",be),r.addEventListener("submit",Ye),o.querySelectorAll('input[name="date-type"]').forEach(l=>{l.addEventListener("change",fe)}),te()}function Re(){const e=document.getElementById("backdrop"),n=document.getElementById("manage-quick-selects-dialog");if(!e||!n)return;e.classList.remove("hidden"),n.classList.remove("hidden"),n.classList.add("block"),e.offsetWidth,n.offsetWidth,e.classList.remove("opacity-0"),n.classList.remove("opacity-0");const{edit:t}=H();t&&Me(t),te()}function be(){const e=document.getElementById("backdrop"),n=document.getElementById("manage-quick-selects-dialog");if(!e||!n)return;e.classList.add("opacity-0"),n.classList.add("opacity-0");const t=document.getElementById("add-quick-select-form");t&&t.reset(),we(),k.remove.edit(),me(),setTimeout(()=>{e.classList.add("hidden"),n.classList.add("hidden"),n.classList.remove("block")},300)}function te(){const e=document.getElementById("quick-selects-to-manage");if(!e){console.error("Quick selects container not found");return}const n=$.get.quickSelects();e.innerHTML=n.map(r=>je(r)).join(""),e.querySelectorAll(".edit-button").forEach(r=>{r.addEventListener("click",a=>{const d=a.currentTarget.closest("[data-id]")?.getAttribute("data-id");d&&He(d)})}),e.querySelectorAll(".delete-button").forEach(r=>{r.addEventListener("click",a=>{const d=a.currentTarget.closest("[data-id]")?.getAttribute("data-id");d&&Ne(d)})}),Fe(e)}function fe(e){const n=e.target,t=document.getElementById("date-input-container");t&&(n.value==="relative"?t.innerHTML=`
      <label
        for="quick-select-date"
        class="text-sm font-semibold text-slate-700 dark:text-slate-200"
      >Date (DD/MM)</label>
      <input
        type="text"
        id="quick-select-date"
        placeholder="25/12"
        pattern="\\d{2}/\\d{2}"
        required
        class="mt-1 w-full rounded-xl border border-slate-200 px-4 py-3 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-sky-700 dark:focus:border-sky-600"
      />
    `:t.innerHTML=`
      <label
        for="quick-select-date"
        class="text-sm font-semibold text-slate-700 dark:text-slate-200"
      >Date</label>
      <input
        type="date"
        id="quick-select-date"
        required
        class="mt-1 w-full rounded-xl border border-slate-200 px-4 py-3 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-sky-700 dark:focus:border-sky-600"
      />
    `)}function Ce(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function P(e){const n=document.getElementById("add-quick-select-form");if(!n)return;const t=n.querySelector(".error-message");t&&t.remove();const o=document.createElement("div");o.className="mt-4 error-message col-span-full bg-red-50 text-red-700 border border-red-200 rounded-xl p-3 text-sm dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",o.textContent=e,n.appendChild(o)}function we(){const e=document.querySelector(".error-message");e&&e.remove()}function Me(e){const t=$.get.quickSelects().find(d=>d.id===e);if(!t){console.error("Quick select not found for editing");return}const o=document.getElementById("quick-select-name"),r=document.getElementById("quick-select-date"),a=document.getElementById("date-type-relative"),l=document.getElementById("date-type-absolute");if(!o||!r||!a||!l){console.error("Form inputs not found");return}if(o.value=t.label,t.type==="relative"){a.checked=!0,fe({target:a});const[d,D]=t.date.split("-");setTimeout(()=>{const L=document.getElementById("quick-select-date");L&&(L.value=`${D}/${d}`)},0)}else l.checked=!0,fe({target:l}),setTimeout(()=>{const d=document.getElementById("quick-select-date");d&&(d.value=t.date)},0);me()}function me(){const{edit:e}=H(),n=document.querySelector("#add-quick-select-form button[type='submit']");if(n){const t=n.querySelector("svg");e?(n.innerHTML="",t&&(t.querySelector("use")?.setAttribute("href","/svg-icons.svg#save"),n.appendChild(t)),n.appendChild(document.createTextNode("Update Quick Select"))):(n.innerHTML="",t&&(t.querySelector("use")?.setAttribute("href","/svg-icons.svg#plus"),n.appendChild(t)),n.appendChild(document.createTextNode("Add Quick Select")))}}function He(e){k.set.edit(e),Me(e)}function Ye(e){e.preventDefault(),we();const{edit:n}=H();n?Ke(e,n):Pe(e)}function Pe(e){const n=e.target,t=n.querySelector("#quick-select-name"),o=n.querySelector("#quick-select-date"),r=n.querySelector('input[name="date-type"]:checked');if(!t||!o||!r){console.error("Form inputs not found");return}const a=t.value.trim(),l=o.value.trim(),d=r.value;if(!a||!l){P("Please fill in all fields");return}const D=Ce(a);if(!D){P("Please enter a valid name");return}const L=$.get.quickSelects();if(L.some(I=>I.id===D)){P("A quick select with this name already exists");return}let Q=l;if(d==="relative"){const I=l.match(/^(\d{2})\/(\d{2})$/);if(!I){P("Date must be in DD/MM format (e.g., 25/12)");return}const[,b,S]=I;Q=`${S}-${b}`}else{if(!l.match(/^\d{4}-\d{2}-\d{2}$/)){P("Invalid date format");return}Q=l}const h={id:D,label:a,date:Q,type:d};L.push(h),$.set.quickSelects(L),p.emit(E.QUICK_SELECT_ADDED,{quickSelect:h}),n.reset(),te()}function Ke(e,n){const t=e.target,o=t.querySelector("#quick-select-name"),r=t.querySelector("#quick-select-date"),a=t.querySelector('input[name="date-type"]:checked');if(!o||!r||!a){console.error("Form inputs not found");return}const l=o.value.trim(),d=r.value.trim(),D=a.value;if(!l||!d){P("Please fill in all fields");return}const L=Ce(l);if(!L){P("Please enter a valid name");return}const Q=$.get.quickSelects();if(L!==n&&Q.some(S=>S.id===L)){P("A quick select with this name already exists");return}let h=d;if(D==="relative"){const S=d.match(/^(\d{2})\/(\d{2})$/);if(!S){P("Date must be in DD/MM format (e.g., 25/12)");return}const[,A,C]=S;h=`${C}-${A}`}else{if(!d.match(/^\d{4}-\d{2}-\d{2}$/)){P("Invalid date format");return}h=d}const I={id:L,label:l,date:h,type:D},b=Q.map(S=>S.id===n?I:S);$.set.quickSelects(b),p.emit(E.QUICK_SELECT_UPDATED,{oldId:n,quickSelect:I}),t.reset(),k.remove.edit(),me(),te()}function Ne(e){confirm("Are you sure you want to delete this quick select?")&&($.remove.quickSelect(e),p.emit(E.QUICK_SELECT_DELETED,{id:e}),te())}function Fe(e){const n=e.querySelectorAll("[data-id]");let t=null,o=!1,r=null,a=null,l=null;const d=()=>{r&&(document.removeEventListener("touchmove",r),r=null),a&&(document.removeEventListener("touchend",a),a=null),l&&(document.removeEventListener("touchcancel",l),l=null)},D=h=>{const I=h;if(!o||!t){d();return}const b=I.touches[0];if(!b)return;const S=b.clientY;I.preventDefault();const A=Array.from(e.querySelectorAll("[data-id]"));let C=null;for(const R of A){if(R===t)continue;const Y=R.getBoundingClientRect();if(S>=Y.top&&S<=Y.bottom){C=R;break}}if(!C){let R=1/0;for(const Y of A){if(Y===t)continue;const K=Y.getBoundingClientRect(),W=K.top+K.height/2,_=Math.abs(S-W);_<R&&(R=_,C=Y)}}if(C&&C!==t){const R=C.getBoundingClientRect(),Y=R.top+R.height/2;t.getBoundingClientRect();const K=Array.from(A).indexOf(t),W=Array.from(A).indexOf(C);if(S<Y)if(W>K){const _=C.previousElementSibling;_&&_!==t?_.insertAdjacentElement("afterend",t):C.parentNode?.insertBefore(t,C)}else C.parentNode?.insertBefore(t,C);else if(W<K)C.insertAdjacentElement("afterend",t);else{const _=C.nextElementSibling;_&&_!==t?_.insertAdjacentElement("beforebegin",t):C.parentNode?.insertBefore(t,C.nextSibling)}}},L=h=>{t&&(t.classList.remove("opacity-50"),t=null,o=!1,Te()),d()},Q=h=>{t&&(t.classList.remove("opacity-50"),t=null,o=!1),d()};n.forEach(h=>{const I=h.querySelector(".drag-handle");I&&(I.addEventListener("mousedown",()=>{h.setAttribute("draggable","true")}),h.addEventListener("dragstart",b=>{t=h,t.classList.add("opacity-50")}),h.addEventListener("dragend",()=>{t&&(t.classList.remove("opacity-50"),t.removeAttribute("draggable"),t=null),Te()}),h.addEventListener("dragover",b=>{if(b.preventDefault(),t&&t!==h){const S=h.getBoundingClientRect(),A=S.top+S.height/2;b.clientY<A?h.parentNode?.insertBefore(t,h):h.parentNode?.insertBefore(t,h.nextSibling)}}),I.addEventListener("touchstart",b=>{const S=b,A=S.touches[0];A&&(A.clientY,t=h,o=!0,t.classList.add("opacity-50"),S.preventDefault(),r=D,a=L,l=Q,document.addEventListener("touchmove",r),document.addEventListener("touchend",a),document.addEventListener("touchcancel",l))}))})}function Te(){const e=document.getElementById("quick-selects-to-manage");if(!e)return;const n=e.querySelectorAll("[data-id]"),t=Array.from(n).map(a=>a.getAttribute("data-id")),o=$.get.quickSelects(),r=t.map(a=>o.find(l=>l.id===a)).filter(a=>a!==void 0);$.set.quickSelects(r),p.emit(E.QUICK_SELECT_REORDERED)}function je(e){const n=e.type==="relative",t=n?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-400";let o=e.date;if(n&&e.date.match(/^\d{2}-\d{2}$/)){const[r,a]=e.date.split("-");o=`${a}/${r}`}else if(!n&&e.date.match(/^\d{4}-\d{2}-\d{2}$/)){const[r,a,l]=e.date.split("-");o=`${l}/${a}/${r}`}return`
    <div
      class="flex items-center gap-2 md:gap-4 bg-slate-50 dark:bg-slate-900 rounded-xl p-2 md:p-4 border border-slate-200 dark:border-slate-700 group hover:border-slate-300 dark:hover:border-slate-600 transition-all"
      data-id="${e.id}"
    >
      <button
        class="drag-handle cursor-move text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors touch-none"
      >
        <svg class="w-5 h-5">
          <use href="/svg-icons.svg#reorder"></use>
        </svg>
      </button>
      <div class="flex-1 min-w-0">
        <div class="font-semibold text-slate-900 dark:text-slate-100">
          ${e.label}
        </div>
        <div
          class="text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2"
        >
          <span>${o}</span>
          <span
            class="text-xs px-2 py-0.5 rounded-full ${t}"
          >${n?"Relative":"Absolute"}</span>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button
          class="edit-button btn-icon btn-icon-secondary opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"
        >
          <svg class="w-4 h-4">
            <use href="/svg-icons.svg#edit"></use>
          </svg>
        </button>
        <button
          class="delete-button btn-icon btn-icon-secondary opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"
        >
          <svg class="w-4 h-4">
            <use href="/svg-icons.svg#trash"></use>
          </svg>
        </button>
      </div>
    </div>
  `}function Ge(){Ie(),xe(),$e(),Qe(),Ue(),Be()}document.addEventListener("DOMContentLoaded",Ge);
//# sourceMappingURL=index-De5ZNx9g.js.map

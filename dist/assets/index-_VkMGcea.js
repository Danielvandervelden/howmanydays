(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const I={FROM_DATE:"fromDate",TO_DATE:"toDate",MODE:"mode",QUICK_SELECT:"quickSelect",EDIT:"edit"},me={QUICK_SELECTS:"quickSelects"},ge=[{id:"christmas",label:"Christmas",date:"12-25",type:"relative"},{id:"halloween",label:"Halloween",date:"10-31",type:"relative"},{id:"thanksgiving",label:"Thanksgiving",date:"11-28",type:"relative"},{id:"new-year",label:"New Year",date:"01-01",type:"relative"},{id:"easter",label:"Easter",date:"04-04",type:"relative"},{id:"valentines",label:"Valentine's Day",date:"02-14",type:"relative"},{id:"spring",label:"Spring",date:"03-20",type:"relative"},{id:"summer",label:"Summer",date:"06-21",type:"relative"},{id:"autumn",label:"Fall",date:"09-23",type:"relative"},{id:"winter",label:"Winter",date:"12-21",type:"relative"}],se="btn-primary",ie="btn-secondary";function ee({quickSelect:e,isActive:t}){const n=document.createElement("button");return n.setAttribute("data-id",e.id),n.classList.add("quick-select-button"),n.classList.add(t?se:ie),n.disabled=t,n.setAttribute("data-date",e.date),n.textContent=e.label,n}const j=new Map,E={emit:(e,t)=>{const n=new CustomEvent(e,{detail:t});console.log(`[Events] Emitting ${e}`,t),document.dispatchEvent(n)},on:(e,t)=>{console.log(`[Events] Registering listener for ${e}`),j.has(e)||(j.set(e,new Set),document.addEventListener(e,r=>{const o=r;console.log(`[Events] Received ${e}`,o.detail);const a=j.get(e);a&&a.forEach(c=>{console.log(`[Events] Calling callback for ${e}`),c(o.detail)})}));const n=j.get(e);n&&n.add(t)},off:(e,t)=>{const n=j.get(e);n&&n.delete(t)}};function x(){const e=new URLSearchParams(window.location.search),t=e.get(I.FROM_DATE),n=e.get(I.TO_DATE),r=e.get(I.MODE),o=e.get(I.QUICK_SELECT),a=e.get(I.EDIT);return{fromDate:t,toDate:n,mode:r,quickSelect:o,edit:a}}var h=(e=>(e.QUICK_SELECT_CLICKED="quick-select-clicked",e.MODE_CHANGED="mode-changed",e.ENABLE_MODE_CONTROLS="enable-mode-controls",e.FROM_DATE_CHANGED="from-date-changed",e.TO_DATE_CHANGED="to-date-changed",e.QUICK_SELECT_DELETED="quick-select-deleted",e.QUICK_SELECT_ADDED="quick-select-added",e.QUICK_SELECT_UPDATED="quick-select-updated",e.QUICK_SELECT_REORDERED="quick-select-reordered",e.QUICK_SELECT_REMOVED_FROM_URL="quick-select-removed-from-url",e))(h||{});const w={get:{quickSelects:()=>{const e=localStorage.getItem(me.QUICK_SELECTS);return e?JSON.parse(e):[]}},set:{quickSelects:e=>{localStorage.setItem(me.QUICK_SELECTS,JSON.stringify(e))}},remove:{quickSelect:e=>{const t=w.get.quickSelects().filter(n=>n.id!==e);w.set.quickSelects(t)}}},k={set:{fromDate:e=>{const t=new URLSearchParams(window.location.search);t.set(I.FROM_DATE,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},toDate:e=>{const t=new URLSearchParams(window.location.search);t.set(I.TO_DATE,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},mode:e=>{const t=new URLSearchParams(window.location.search);t.set(I.MODE,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},quickSelect:e=>{const t=new URLSearchParams(window.location.search);t.set(I.QUICK_SELECT,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)},edit:e=>{const t=new URLSearchParams(window.location.search);t.set(I.EDIT,e);const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)}},remove:{fromDate:()=>{const e=new URLSearchParams(window.location.search);e.delete(I.FROM_DATE);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},toDate:()=>{const e=new URLSearchParams(window.location.search);e.delete(I.TO_DATE);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},mode:()=>{const e=new URLSearchParams(window.location.search);e.delete(I.MODE);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},quickSelect:()=>{const e=new URLSearchParams(window.location.search);e.delete(I.QUICK_SELECT);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)},edit:()=>{const e=new URLSearchParams(window.location.search);e.delete(I.EDIT);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)}}};function _e(){he(),E.on(h.QUICK_SELECT_DELETED,({id:e})=>{const t=document.querySelector(`.quick-select-button[data-id="${e}"]`);t&&t.remove()}),E.on(h.QUICK_SELECT_REMOVED_FROM_URL,()=>{he(!0)}),E.on(h.QUICK_SELECT_ADDED,({quickSelect:e})=>{const t=document.getElementById("quick-select-content");if(!(t instanceof HTMLDivElement)){console.error("Quick select container not found");return}const n=ee({quickSelect:e,isActive:!1});n.addEventListener("click",()=>{te(e.id)}),t.appendChild(n)}),E.on(h.QUICK_SELECT_UPDATED,({oldId:e,quickSelect:t})=>{const n=document.querySelector(`.quick-select-button[data-id="${e}"]`);if(n)if(e!==t.id){if(!(document.getElementById("quick-select-content")instanceof HTMLDivElement)){console.error("Quick select container not found");return}const o=ee({quickSelect:t,isActive:!1});o.addEventListener("click",()=>{te(t.id)}),n.replaceWith(o)}else{const r=n.querySelector("span");r&&(r.textContent=t.label)}}),E.on(h.QUICK_SELECT_REORDERED,()=>{const{quickSelect:e}=x(),t=document.getElementById("quick-select-content");if(!(t instanceof HTMLDivElement)){console.error("Quick select container not found");return}t.innerHTML="",w.get.quickSelects().forEach(r=>{const o=ee({quickSelect:r,isActive:r.id===e});o.addEventListener("click",()=>{te(r.id)}),t.appendChild(o)})})}function he(e=!1){const{quickSelect:t}=x();let n=w.get.quickSelects();n.length===0&&(w.set.quickSelects(ge),n=ge);const r=document.getElementById("quick-select-content");if(!(r instanceof HTMLDivElement)){console.error("Quick select container not found");return}r.innerHTML="",n.forEach(o=>{const a=ee({quickSelect:o,isActive:e?!1:o.id===t});a.addEventListener("click",()=>{te(o.id)}),r.appendChild(a)})}function te(e){k.set.quickSelect(e);const t=w.get.quickSelects().find(r=>r.id===e);if(!t){console.error("Quick select in localstorage not found to handle quick select button click");return}E.emit(h.QUICK_SELECT_CLICKED,{quickSelect:t});const n=document.querySelectorAll(".quick-select-button");for(const r of n)r instanceof HTMLButtonElement&&(r.getAttribute("data-id")===e?(r.classList.remove(ie),r.classList.add(se),r.disabled=!0):(r.classList.remove(se),r.classList.add(ie),r.disabled=!1))}function Me(){const e=document.getElementById("current-time"),t=document.getElementById("current-date");if(!e||!t){console.error("Current time or date div not found");return}Ee(e,t),setInterval(()=>{Ee(e,t)},1e3)}function Ee(e,t){const n=navigator.language,r=new Date,o=r.toLocaleTimeString(),a=r.toLocaleDateString(n,{day:"numeric",month:"long",year:"numeric"});e.textContent=o,t.textContent=a}function Ie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ne={exports:{}},qe=ne.exports,pe;function Oe(){return pe||(pe=1,(function(e,t){(function(n,r){e.exports=r()})(qe,(function(){var n=1e3,r=6e4,o=36e5,a="millisecond",c="second",d="minute",p="hour",v="day",b="week",S="month",M="quarter",O="year",$="date",J="Invalid Date",oe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ce=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,we={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var l=["th","st","nd","rd"],s=f%100;return"["+f+(l[(s-20)%10]||l[s]||l[0])+"]"}},re=function(f,l,s){var u=String(f);return!u||u.length>=l?f:""+Array(l+1-u.length).join(s)+f},$e={s:re,z:function(f){var l=-f.utcOffset(),s=Math.abs(l),u=Math.floor(s/60),i=s%60;return(l<=0?"+":"-")+re(u,2,"0")+":"+re(i,2,"0")},m:function f(l,s){if(l.date()<s.date())return-f(s,l);var u=12*(s.year()-l.year())+(s.month()-l.month()),i=l.clone().add(u,S),m=s-i<0,g=l.clone().add(u+(m?-1:1),S);return+(-(u+(s-i)/(m?i-g:g-i))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:S,y:O,w:b,d:v,D:$,h:p,m:d,s:c,ms:a,Q:M}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},K="en",B={};B[K]=we;var de="$isDayjsObject",ae=function(f){return f instanceof Z||!(!f||!f[de])},z=function f(l,s,u){var i;if(!l)return K;if(typeof l=="string"){var m=l.toLowerCase();B[m]&&(i=m),s&&(B[m]=s,i=m);var g=l.split("-");if(!i&&g.length>1)return f(g[0])}else{var y=l.name;B[y]=l,i=y}return!u&&i&&(K=i),i||!u&&K},T=function(f,l){if(ae(f))return f.clone();var s=typeof l=="object"?l:{};return s.date=f,s.args=arguments,new Z(s)},D=$e;D.l=z,D.i=ae,D.w=function(f,l){return T(f,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var Z=(function(){function f(s){this.$L=z(s.locale,null,!0),this.parse(s),this.$x=this.$x||s.x||{},this[de]=!0}var l=f.prototype;return l.parse=function(s){this.$d=(function(u){var i=u.date,m=u.utc;if(i===null)return new Date(NaN);if(D.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var g=i.match(oe);if(g){var y=g[2]-1||0,L=(g[7]||"0").substring(0,3);return m?new Date(Date.UTC(g[1],y,g[3]||1,g[4]||0,g[5]||0,g[6]||0,L)):new Date(g[1],y,g[3]||1,g[4]||0,g[5]||0,g[6]||0,L)}}return new Date(i)})(s),this.init()},l.init=function(){var s=this.$d;this.$y=s.getFullYear(),this.$M=s.getMonth(),this.$D=s.getDate(),this.$W=s.getDay(),this.$H=s.getHours(),this.$m=s.getMinutes(),this.$s=s.getSeconds(),this.$ms=s.getMilliseconds()},l.$utils=function(){return D},l.isValid=function(){return this.$d.toString()!==J},l.isSame=function(s,u){var i=T(s);return this.startOf(u)<=i&&i<=this.endOf(u)},l.isAfter=function(s,u){return T(s)<this.startOf(u)},l.isBefore=function(s,u){return this.endOf(u)<T(s)},l.$g=function(s,u,i){return D.u(s)?this[u]:this.set(i,s)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(s,u){var i=this,m=!!D.u(u)||u,g=D.p(s),y=function(P,q){var R=D.w(i.$u?Date.UTC(i.$y,q,P):new Date(i.$y,q,P),i);return m?R:R.endOf(v)},L=function(P,q){return D.w(i.toDate()[P].apply(i.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(q)),i)},C=this.$W,_=this.$M,A=this.$D,Y="set"+(this.$u?"UTC":"");switch(g){case O:return m?y(1,0):y(31,11);case S:return m?y(1,_):y(0,_+1);case b:var H=this.$locale().weekStart||0,N=(C<H?C+7:C)-H;return y(m?A-N:A+(6-N),_);case v:case $:return L(Y+"Hours",0);case p:return L(Y+"Minutes",1);case d:return L(Y+"Seconds",2);case c:return L(Y+"Milliseconds",3);default:return this.clone()}},l.endOf=function(s){return this.startOf(s,!1)},l.$set=function(s,u){var i,m=D.p(s),g="set"+(this.$u?"UTC":""),y=(i={},i[v]=g+"Date",i[$]=g+"Date",i[S]=g+"Month",i[O]=g+"FullYear",i[p]=g+"Hours",i[d]=g+"Minutes",i[c]=g+"Seconds",i[a]=g+"Milliseconds",i)[m],L=m===v?this.$D+(u-this.$W):u;if(m===S||m===O){var C=this.clone().set($,1);C.$d[y](L),C.init(),this.$d=C.set($,Math.min(this.$D,C.daysInMonth())).$d}else y&&this.$d[y](L);return this.init(),this},l.set=function(s,u){return this.clone().$set(s,u)},l.get=function(s){return this[D.p(s)]()},l.add=function(s,u){var i,m=this;s=Number(s);var g=D.p(u),y=function(_){var A=T(m);return D.w(A.date(A.date()+Math.round(_*s)),m)};if(g===S)return this.set(S,this.$M+s);if(g===O)return this.set(O,this.$y+s);if(g===v)return y(1);if(g===b)return y(7);var L=(i={},i[d]=r,i[p]=o,i[c]=n,i)[g]||1,C=this.$d.getTime()+s*L;return D.w(C,this)},l.subtract=function(s,u){return this.add(-1*s,u)},l.format=function(s){var u=this,i=this.$locale();if(!this.isValid())return i.invalidDate||J;var m=s||"YYYY-MM-DDTHH:mm:ssZ",g=D.z(this),y=this.$H,L=this.$m,C=this.$M,_=i.weekdays,A=i.months,Y=i.meridiem,H=function(q,R,F,X){return q&&(q[R]||q(u,m))||F[R].slice(0,X)},N=function(q){return D.s(y%12||12,q,"0")},P=Y||function(q,R,F){var X=q<12?"AM":"PM";return F?X.toLowerCase():X};return m.replace(Ce,(function(q,R){return R||(function(F){switch(F){case"YY":return String(u.$y).slice(-2);case"YYYY":return D.s(u.$y,4,"0");case"M":return C+1;case"MM":return D.s(C+1,2,"0");case"MMM":return H(i.monthsShort,C,A,3);case"MMMM":return H(A,C);case"D":return u.$D;case"DD":return D.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return H(i.weekdaysMin,u.$W,_,2);case"ddd":return H(i.weekdaysShort,u.$W,_,3);case"dddd":return _[u.$W];case"H":return String(y);case"HH":return D.s(y,2,"0");case"h":return N(1);case"hh":return N(2);case"a":return P(y,L,!0);case"A":return P(y,L,!1);case"m":return String(L);case"mm":return D.s(L,2,"0");case"s":return String(u.$s);case"ss":return D.s(u.$s,2,"0");case"SSS":return D.s(u.$ms,3,"0");case"Z":return g}return null})(q)||g.replace(":","")}))},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(s,u,i){var m,g=this,y=D.p(u),L=T(s),C=(L.utcOffset()-this.utcOffset())*r,_=this-L,A=function(){return D.m(g,L)};switch(y){case O:m=A()/12;break;case S:m=A();break;case M:m=A()/3;break;case b:m=(_-C)/6048e5;break;case v:m=(_-C)/864e5;break;case p:m=_/o;break;case d:m=_/r;break;case c:m=_/n;break;default:m=_}return i?m:D.a(m)},l.daysInMonth=function(){return this.endOf(S).$D},l.$locale=function(){return B[this.$L]},l.locale=function(s,u){if(!s)return this.$L;var i=this.clone(),m=z(s,u,!0);return m&&(i.$L=m),i},l.clone=function(){return D.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},f})(),fe=Z.prototype;return T.prototype=fe,[["$ms",a],["$s",c],["$m",d],["$H",p],["$W",v],["$M",S],["$y",O],["$D",$]].forEach((function(f){fe[f[1]]=function(l){return this.$g(l,f[0],f[1])}})),T.extend=function(f,l){return f.$i||(f(l,Z,T),f.$i=!0),T},T.locale=z,T.isDayjs=ae,T.unix=function(f){return T(1e3*f)},T.en=B[K],T.Ls=B,T.p={},T}))})(ne)),ne.exports}var Ae=Oe();const Q=Ie(Ae);function W(){const e=document.getElementById("from-date"),t=document.getElementById("to-date"),n=document.getElementById("quick-select-content"),r=document.getElementById("from-today-link"),o=document.getElementById("to-today-link"),a=document.getElementById("mode-toggle-container"),c=a?.querySelectorAll("input[type='radio']");return{fromDateInput:e,toDateInput:t,quickSelectsContainer:n,fromTodayLink:r,toTodayLink:o,modeToggleContainer:a,modeToggleInputs:c}}function Qe(){const{fromDate:e,toDate:t}=x();e||k.set.fromDate(new Date().toISOString().split("T")[0]),t||k.set.toDate(new Date().toISOString().split("T")[0]);const{fromDateInput:n,toDateInput:r,fromTodayLink:o,toTodayLink:a}=W();if(!(n instanceof HTMLInputElement)||!(r instanceof HTMLInputElement)||!(o instanceof HTMLAnchorElement)||!(a instanceof HTMLAnchorElement)){console.error("From date, to date input, from today link or to today link not found");return}n.value=e?new Date(e).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],r.value=t?new Date(t).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],o.addEventListener("click",c=>{c.preventDefault(),n.value=Q().format("YYYY-MM-DD"),k.set.fromDate(n.value),E.emit(h.FROM_DATE_CHANGED,{fromDate:n.value}),E.emit(h.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),k.remove.quickSelect()}),a.addEventListener("click",c=>{c.preventDefault(),r.value=Q().format("YYYY-MM-DD"),k.set.toDate(r.value),E.emit(h.TO_DATE_CHANGED,{toDate:r.value}),E.emit(h.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),E.emit(h.QUICK_SELECT_REMOVED_FROM_URL),k.remove.quickSelect()}),n.addEventListener("click",()=>{E.emit(h.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),E.emit(h.QUICK_SELECT_REMOVED_FROM_URL),k.remove.quickSelect()}),r.addEventListener("click",()=>{E.emit(h.ENABLE_MODE_CONTROLS,{shouldEnable:!0}),E.emit(h.QUICK_SELECT_REMOVED_FROM_URL),k.remove.quickSelect()}),n.addEventListener("change",c=>{if(!(c.target instanceof HTMLInputElement)){console.error("From date input not found");return}k.set.fromDate(c.target.value),E.emit(h.FROM_DATE_CHANGED,{fromDate:c.target.value})}),r.addEventListener("change",c=>{if(!(c.target instanceof HTMLInputElement)){console.error("To date input not found");return}k.set.toDate(c.target.value),E.emit(h.TO_DATE_CHANGED,{toDate:c.target.value})}),E.on(h.QUICK_SELECT_CLICKED,De),E.on(h.MODE_CHANGED,De)}function De(){const{mode:e,fromDate:t,quickSelect:n}=x(),{fromDateInput:r,toDateInput:o}=W(),a=w.get.quickSelects().find(d=>d.id===n);if(!(r instanceof HTMLInputElement)||!(o instanceof HTMLInputElement)){console.error("From date or to date input not found");return}if(!a){console.error("Quick select in localstorage not found to recalculate dates");return}if(a.date.match(/^\d{2}-\d{2}$/)){if(e==="since"){const d=Q(t),p=Q(`${a.date}-${d.year()}`,"DD-MM-YYYY");p.isBefore(d)?(o.value=p.format("YYYY-MM-DD"),k.set.toDate(o.value)):(o.value=p.subtract(1,"year").format("YYYY-MM-DD"),k.set.toDate(o.value))}if(e==="until"){const d=Q(t),p=Q(`${a.date}-${d.year()}`,"DD-MM-YYYY");p.isAfter(d)?(o.value=p.format("YYYY-MM-DD"),k.set.toDate(o.value)):(o.value=p.add(1,"year").format("YYYY-MM-DD"),k.set.toDate(o.value))}}else o.value=a.date,k.set.toDate(o.value)}function xe(){const{mode:e}=x();e||k.set.mode("until");const{modeToggleContainer:t}=W();if(!(t instanceof HTMLDivElement)){console.error("Mode toggle container not found");return}E.on(h.QUICK_SELECT_CLICKED,ye),E.on(h.ENABLE_MODE_CONTROLS,({shouldEnable:r})=>{ce(r)});const{modeToggleInputs:n}=W();for(const r of n){if(!(r instanceof HTMLInputElement)){console.error("Mode toggle input not found");return}r.addEventListener("change",o=>{if(!(o.target instanceof HTMLInputElement)){console.error("Mode toggle input not found");return}if(o.target.value!=="since"&&o.target.value!=="until"){console.error("Invalid mode");return}k.set.mode(o.target.value),E.emit(h.MODE_CHANGED,{mode:o.target.value})})}ye()}function ye(){const{fromDate:e,quickSelect:t}=x(),n=w.get.quickSelects().find(r=>r.id===t);if(n)if(n.type==="absolute"){ce(!1);const r=Q(e);Q(n.date).isAfter(r)?(document.getElementById("until-radio").checked=!0,document.getElementById("since-radio").checked=!1,E.emit(h.MODE_CHANGED,{mode:"until"}),k.set.mode("until")):(document.getElementById("since-radio").checked=!0,document.getElementById("until-radio").checked=!1,E.emit(h.MODE_CHANGED,{mode:"since"}),k.set.mode("since"))}else ce(!0)}function ce(e){const{modeToggleInputs:t,modeToggleContainer:n}=W();if(!(t instanceof NodeList)){console.error("Mode toggle inputs not found");return}if(!(n instanceof HTMLDivElement)){console.error("Mode toggle container not found");return}e?(n.classList.remove("opacity-50"),n.classList.remove("pointer-events-none")):(n.classList.add("opacity-50"),n.classList.add("pointer-events-none"));for(const r of t)r.disabled=!e}function Ue(){E.on(h.QUICK_SELECT_CLICKED,G),E.on(h.MODE_CHANGED,G),E.on(h.FROM_DATE_CHANGED,G),E.on(h.TO_DATE_CHANGED,G),G()}function G(){const{fromDate:e,toDate:t,mode:n}=x();if(!e||!t||!n){console.error("From date, to date or mode not found");return}const r=Q(e),o=Q(t),a=document.getElementById("days-result"),c=r.diff(o,"day");a&&(a.textContent=Math.abs(c).toString()),E.on(h.QUICK_SELECT_REMOVED_FROM_URL,()=>Se(!0)),Se()}function Se(e=!1){const t=document.getElementById("quick-select-result"),{quickSelect:n,toDate:r,fromDate:o,mode:a}=x();if(!t){console.error("Quick select result div not found");return}if(t&&(t.textContent=""),!n||e){const c=Q(r),d=Q(o);c.isAfter(d)?t.textContent="from now":t.textContent="ago"}else{const d=w.get.quickSelects().find(p=>p.id===n);if(!d)return;t&&(t.textContent=`${a} ${d.label}`)}}function Re(){const e=document.querySelector("#quick-select-header a"),t=document.getElementById("close-manage-quick-selects-dialog"),n=document.getElementById("backdrop"),r=document.getElementById("manage-quick-selects-dialog"),o=document.getElementById("add-quick-select-form");if(!e||!t||!n||!r||!o){console.table({manageButton:!!e,closeButton:!!t,backdrop:!!n,dialog:!!r,form:!!o});return}e.addEventListener("click",Be),t.addEventListener("click",ke),n.addEventListener("click",ke),o.addEventListener("submit",Pe),r.querySelectorAll('input[name="date-type"]').forEach(c=>{c.addEventListener("change",le)}),V()}function Be(){const e=document.getElementById("backdrop"),t=document.getElementById("manage-quick-selects-dialog");if(!e||!t)return;e.classList.remove("hidden"),t.classList.remove("hidden"),t.classList.add("block"),e.offsetWidth,t.offsetWidth,e.classList.remove("opacity-0"),t.classList.remove("opacity-0");const{edit:n}=x();n&&Te(n),V()}function ke(){const e=document.getElementById("backdrop"),t=document.getElementById("manage-quick-selects-dialog");if(!e||!t)return;e.classList.add("opacity-0"),t.classList.add("opacity-0");const n=document.getElementById("add-quick-select-form");n&&n.reset(),be(),k.remove.edit(),ue(),setTimeout(()=>{e.classList.add("hidden"),t.classList.add("hidden"),t.classList.remove("block")},300)}function V(){const e=document.getElementById("quick-selects-to-manage");if(!e){console.error("Quick selects container not found");return}const t=w.get.quickSelects();e.innerHTML=t.map(o=>je(o)).join(""),e.querySelectorAll(".edit-button").forEach(o=>{o.addEventListener("click",a=>{const d=a.currentTarget.closest("[data-id]")?.getAttribute("data-id");d&&He(d)})}),e.querySelectorAll(".delete-button").forEach(o=>{o.addEventListener("click",a=>{const d=a.currentTarget.closest("[data-id]")?.getAttribute("data-id");d&&Ne(d)})}),Fe(e)}function le(e){const t=e.target,n=document.getElementById("date-input-container");n&&(t.value==="relative"?n.innerHTML=`
      <label
        for="quick-select-date"
        class="text-sm font-semibold text-slate-700 dark:text-slate-200"
      >Date (DD/MM)</label>
      <input
        type="text"
        id="quick-select-date"
        placeholder="25/12"
        pattern="\\d{2}/\\d{2}"
        required
        class="mt-1 w-full rounded-xl border border-slate-200 px-4 py-3 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-sky-700 dark:focus:border-sky-600"
      />
    `:n.innerHTML=`
      <label
        for="quick-select-date"
        class="text-sm font-semibold text-slate-700 dark:text-slate-200"
      >Date</label>
      <input
        type="date"
        id="quick-select-date"
        required
        class="mt-1 w-full rounded-xl border border-slate-200 px-4 py-3 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-sky-700 dark:focus:border-sky-600"
      />
    `)}function Le(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function U(e){const t=document.getElementById("add-quick-select-form");if(!t)return;const n=t.querySelector(".error-message");n&&n.remove();const r=document.createElement("div");r.className="mt-4 error-message col-span-full bg-red-50 text-red-700 border border-red-200 rounded-xl p-3 text-sm dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",r.textContent=e,t.appendChild(r)}function be(){const e=document.querySelector(".error-message");e&&e.remove()}function Te(e){const n=w.get.quickSelects().find(d=>d.id===e);if(!n){console.error("Quick select not found for editing");return}const r=document.getElementById("quick-select-name"),o=document.getElementById("quick-select-date"),a=document.getElementById("date-type-relative"),c=document.getElementById("date-type-absolute");if(!r||!o||!a||!c){console.error("Form inputs not found");return}if(r.value=n.label,n.type==="relative"){a.checked=!0,le({target:a});const[d,p]=n.date.split("-");setTimeout(()=>{const v=document.getElementById("quick-select-date");v&&(v.value=`${p}/${d}`)},0)}else c.checked=!0,le({target:c}),setTimeout(()=>{const d=document.getElementById("quick-select-date");d&&(d.value=n.date)},0);ue()}function ue(){const{edit:e}=x(),t=document.querySelector("#add-quick-select-form button[type='submit']");if(t){const n=t.querySelector("svg");e?(t.innerHTML="",n&&(n.querySelector("use")?.setAttribute("href","/svg-icons.svg#save"),t.appendChild(n)),t.appendChild(document.createTextNode("Update Quick Select"))):(t.innerHTML="",n&&(n.querySelector("use")?.setAttribute("href","/svg-icons.svg#plus"),t.appendChild(n)),t.appendChild(document.createTextNode("Add Quick Select")))}}function He(e){k.set.edit(e),Te(e)}function Pe(e){e.preventDefault(),be();const{edit:t}=x();t?Ke(e,t):Ye(e)}function Ye(e){const t=e.target,n=t.querySelector("#quick-select-name"),r=t.querySelector("#quick-select-date"),o=t.querySelector('input[name="date-type"]:checked');if(!n||!r||!o){console.error("Form inputs not found");return}const a=n.value.trim(),c=r.value.trim(),d=o.value;if(!a||!c){U("Please fill in all fields");return}const p=Le(a);if(!p){U("Please enter a valid name");return}const v=w.get.quickSelects();if(v.some(M=>M.id===p)){U("A quick select with this name already exists");return}let b=c;if(d==="relative"){const M=c.match(/^(\d{2})\/(\d{2})$/);if(!M){U("Date must be in DD/MM format (e.g., 25/12)");return}const[,O,$]=M;b=`${$}-${O}`}else{if(!c.match(/^\d{4}-\d{2}-\d{2}$/)){U("Invalid date format");return}b=c}const S={id:p,label:a,date:b,type:d};v.push(S),w.set.quickSelects(v),E.emit(h.QUICK_SELECT_ADDED,{quickSelect:S}),t.reset(),V()}function Ke(e,t){const n=e.target,r=n.querySelector("#quick-select-name"),o=n.querySelector("#quick-select-date"),a=n.querySelector('input[name="date-type"]:checked');if(!r||!o||!a){console.error("Form inputs not found");return}const c=r.value.trim(),d=o.value.trim(),p=a.value;if(!c||!d){U("Please fill in all fields");return}const v=Le(c);if(!v){U("Please enter a valid name");return}const b=w.get.quickSelects();if(v!==t&&b.some($=>$.id===v)){U("A quick select with this name already exists");return}let S=d;if(p==="relative"){const $=d.match(/^(\d{2})\/(\d{2})$/);if(!$){U("Date must be in DD/MM format (e.g., 25/12)");return}const[,J,oe]=$;S=`${oe}-${J}`}else{if(!d.match(/^\d{4}-\d{2}-\d{2}$/)){U("Invalid date format");return}S=d}const M={id:v,label:c,date:S,type:p},O=b.map($=>$.id===t?M:$);w.set.quickSelects(O),E.emit(h.QUICK_SELECT_UPDATED,{oldId:t,quickSelect:M}),n.reset(),k.remove.edit(),ue(),V()}function Ne(e){confirm("Are you sure you want to delete this quick select?")&&(w.remove.quickSelect(e),E.emit(h.QUICK_SELECT_DELETED,{id:e}),V())}function Fe(e){const t=e.querySelectorAll("[data-id]");let n=null,r=!1;t.forEach(o=>{const a=o.querySelector(".drag-handle");a&&(a.addEventListener("mousedown",()=>{o.setAttribute("draggable","true")}),o.addEventListener("dragstart",c=>{n=o,n.classList.add("opacity-50")}),o.addEventListener("dragend",()=>{n&&(n.classList.remove("opacity-50"),n.removeAttribute("draggable"),n=null),ve()}),o.addEventListener("dragover",c=>{if(c.preventDefault(),n&&n!==o){const d=o.getBoundingClientRect(),p=d.top+d.height/2;c.clientY<p?o.parentNode?.insertBefore(n,o):o.parentNode?.insertBefore(n,o.nextSibling)}}),a.addEventListener("touchstart",c=>{c.touches[0].clientY,n=o,r=!0,n.classList.add("opacity-50"),c.preventDefault()}),a.addEventListener("touchmove",c=>{if(!r||!n)return;const p=c.touches[0].clientY,v=Array.from(e.querySelectorAll("[data-id]"));let b=null;for(const S of v){if(S===n)continue;const M=S.getBoundingClientRect();if(p>=M.top&&p<=M.bottom){b=S;break}}if(b&&b!==n){const S=b.getBoundingClientRect(),M=S.top+S.height/2;p<M?b.parentNode?.insertBefore(n,b):b.parentNode?.insertBefore(n,b.nextSibling)}c.preventDefault()}),a.addEventListener("touchend",()=>{n&&(n.classList.remove("opacity-50"),n=null,r=!1,ve())}))})}function ve(){const e=document.getElementById("quick-selects-to-manage");if(!e)return;const t=e.querySelectorAll("[data-id]"),n=Array.from(t).map(a=>a.getAttribute("data-id")),r=w.get.quickSelects(),o=n.map(a=>r.find(c=>c.id===a)).filter(a=>a!==void 0);w.set.quickSelects(o),E.emit(h.QUICK_SELECT_REORDERED)}function je(e){const t=e.type==="relative",n=t?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-400";let r=e.date;if(t&&e.date.match(/^\d{2}-\d{2}$/)){const[o,a]=e.date.split("-");r=`${a}/${o}`}else if(!t&&e.date.match(/^\d{4}-\d{2}-\d{2}$/)){const[o,a,c]=e.date.split("-");r=`${c}/${a}/${o}`}return`
    <div
      class="flex items-center gap-2 md:gap-4 bg-slate-50 dark:bg-slate-900 rounded-xl p-2 md:p-4 border border-slate-200 dark:border-slate-700 group hover:border-slate-300 dark:hover:border-slate-600 transition-all"
      data-id="${e.id}"
    >
      <button
        class="drag-handle cursor-move text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors touch-none"
      >
        <svg class="w-5 h-5">
          <use href="/svg-icons.svg#reorder"></use>
        </svg>
      </button>
      <div class="flex-1 min-w-0">
        <div class="font-semibold text-slate-900 dark:text-slate-100">
          ${e.label}
        </div>
        <div
          class="text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2"
        >
          <span>${r}</span>
          <span
            class="text-xs px-2 py-0.5 rounded-full ${n}"
          >${t?"Relative":"Absolute"}</span>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button
          class="edit-button btn-icon btn-icon-secondary opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"
        >
          <svg class="w-4 h-4">
            <use href="/svg-icons.svg#edit"></use>
          </svg>
        </button>
        <button
          class="delete-button btn-icon btn-icon-secondary opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"
        >
          <svg class="w-4 h-4">
            <use href="/svg-icons.svg#trash"></use>
          </svg>
        </button>
      </div>
    </div>
  `}function Ge(){Me(),Qe(),_e(),xe(),Ue(),Re()}document.addEventListener("DOMContentLoaded",Ge);
//# sourceMappingURL=index-_VkMGcea.js.map
